#! /usr/bin/env python
# -*- coding=utf8 -*-

from __future__ import absolute_import
from __future__ import division
from __future__ import print_function

import tensorflow as tf

krank_input_ops = tf.load_op_library('krank_input_ops.so')

test_line = ["__label__26526881	2645b82cb18514bk:1:15.0:15.504 9925b7f3b2d640ao:1:11.0:10.253 7405b7c0d45252aj:1:9.0:10.938 3315b7a9d07361aj:1:14.0:11.746 7335b7cc49a462aj:1:17.0:18.373 6075b7b6714556aj:1:14.0:15.838 7095b7f058a393ao:1:10.0:9.406 9035b77d56f002aj:1:10.0:11.721 7575b77ef1a399bk:1:23.0:24.61 6545b798bac682aj:1:9.0:10.2447025b79985d559aj:1:15.0:10.881 0895b786416070aj:1:6.0:7.606 7755b7b8ef8222aj:1:7.0:7.847 9935b7baca5793aj:1:15.0:16.019 0435b77e902728aw:1:14.0:12.945 0565b7cbc30208aj:1:10.0:10.781 9915b79914c568aj:1:17.0:18.543 9655b9e1681841bk:1:10.0:14.143 2255b7b9622692bk:1:8.0:8.699 1185b785b42459bk:1:7.0:8.691 1275b7b8b0f729aj:1:13.0:14.416 4975b7bc682222aj:1:17.0:18.538 4675b7d2148242bk:1:13.0:13.734 5985b7e2f89912bk:1:11.0:12.458 2075b7c2ebd987bk:1:7.0:7.719 0505b7c0293088aj:1:7.0:8.458 9965b7d561c684bk:1:15.0:11.577 9355b7cf2b5559aj:1:9.0:10.351 9995b78e40d408aj:1:10.0:9.52 4935b7e828b748aj:1:12.0:13.608 6035b7b58e5251aj:1:7.0:8.631 2595b7ab577307bk:1:10.0:10.638 0545b7ce5a0678aj:1:7.0:8.26 7435b7c8a51232aj:1:10.0:3.143 0425b7d59bc278ao:1:12.0:12.953 3495b7b8903169aj:1:10.0:10.691 5775b7d485b816aj:1:8.0:9.219 9475b7cc7c6527aj:1:7.0:7.982 6655b7cb272649aj:1:10.0:11.745 6155b7ad943681aj:1:17.0:18.174 1755b7b3662489bk:1:13.0:14.392 5475b7bc373516aj:1:9.0:2.966 6295b7e582f074bk:1:12.0:13.542 2385b8aa8a6205ah:1:13.0:13.845 0075b78332c185aj:1:7.0:8.464 0145b9c9d06657aj:1:13.0:14.307 8255b7d3431140aw:1:15.0:14.997 0635b932b54744aj:1:72.0:5.588 6705b77f3f4292aj:1:15.0:15.737 1205b780352054ac:1:24.0:25.08 1315b78e3fc403aj:1:18.0:19.11 1345b98bf75389aj:1:578.0:2.986 2505b9e3775146aj:1:77.0:52.095"]

sess = tf.Session()

feature_manager_path = '../../fe/build/preprocess.bin'
[out1, out2, out3, out4] = krank_input_ops.krank_input(
    input=test_line,
    feature_manager_path=feature_manager_path, ws=15
)
out1, out2, out3, out4 = sess.run([out1, out2, out3, out4])

print("positive records: \n", out1)
print("negative records: \n", out2)
print("targets: \n", out3)
print("labels: \n", out4)
